{"ast":null,"code":"var _jsxFileName = \"/home/dangremontlucas/Epitech/Year3/Semestre5/Wormsec/Wormsec/src/components/Visualizer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport Machine from './Machine';\nimport MachineLink from './MachineLink';\nimport './Visualizer.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Visualizer = ({\n  machines,\n  links,\n  onMachineClick,\n  isReduced,\n  initialPositions = {},\n  onPositionsChange\n}) => {\n  _s();\n  const svgRef = useRef(null);\n  const [positions, setPositions] = useState({});\n  const [circlePositions, setCirclePositions] = useState({});\n  const [dragging, setDragging] = useState(null);\n  const [dragStart, setDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const [viewBox, setViewBox] = useState({\n    x: 0,\n    y: 0,\n    width: 550,\n    height: 350\n  });\n  const [isPanning, setIsPanning] = useState(false);\n  const [lastPosition, setLastPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [scale, setScale] = useState(1);\n  const calculateCirclePositions = useCallback(() => {\n    const centerX = 275;\n    const centerY = 175;\n    const radius = 100;\n    const newCirclePositions = {};\n    machines.forEach((machine, index) => {\n      const angle = index * 2 * Math.PI / machines.length;\n      newCirclePositions[machine.id] = {\n        x: centerX + radius * Math.cos(angle),\n        y: centerY + radius * Math.sin(angle)\n      };\n    });\n    return newCirclePositions;\n  }, [machines]);\n  useEffect(() => {\n    const newCirclePositions = calculateCirclePositions();\n    setCirclePositions(newCirclePositions);\n  }, [calculateCirclePositions]);\n\n  // Initialize machine positions from props or in a circle layout\n  useEffect(() => {\n    const newCirclePositions = calculateCirclePositions();\n    if (Object.keys(initialPositions).length > 0) {\n      // Use provided positions if available\n      const newPositions = {};\n      machines.forEach(machine => {\n        if (initialPositions[machine.id]) {\n          newPositions[machine.id] = initialPositions[machine.id];\n        } else {\n          // Fallback to circle position for new machines\n          newPositions[machine.id] = newCirclePositions[machine.id];\n        }\n      });\n      setPositions(newPositions);\n      setCirclePositions(newCirclePositions);\n    } else {\n      // Use circle layout if no positions provided\n      setPositions(newCirclePositions);\n      setCirclePositions(newCirclePositions);\n    }\n  }, [machines, initialPositions, calculateCirclePositions]);\n\n  // Notify parent component when positions change\n  useEffect(() => {\n    if (onPositionsChange && Object.keys(positions).length > 0) {\n      onPositionsChange(positions);\n    }\n  }, [positions, onPositionsChange]);\n\n  // Handle mouse down on SVG for panning\n  const handleSvgMouseDown = e => {\n    if (e.button === 0 && !dragging) {\n      // Left click and not dragging a machine\n      setIsPanning(true);\n      setLastPosition({\n        x: e.clientX,\n        y: e.clientY\n      });\n    }\n  };\n\n  // Handle mouse move for panning and dragging\n  const handleSvgMouseMove = e => {\n    if (dragging) {\n      // We're dragging a machine - use a fixed reference point to avoid trembling\n      const svg = svgRef.current;\n      if (!svg) return;\n      const point = svg.createSVGPoint();\n      point.x = e.clientX;\n      point.y = e.clientY;\n\n      // Get current transformation matrix\n      const ctm = svg.getScreenCTM();\n      if (!ctm) return;\n\n      // Transform client coordinates to SVG coordinates\n      const svgPoint = point.matrixTransform(ctm.inverse());\n\n      // Calculate movement delta from the start position\n      const dx = svgPoint.x - dragStart.x;\n      const dy = svgPoint.y - dragStart.y;\n\n      // Update machine position based on its original position plus the delta\n      const originalPos = positions[dragging];\n      const smoothMove = (current, target, factor = 0.1) => current + (target - current) * factor;\n      setPositions(prev => ({\n        ...prev,\n        [dragging]: {\n          x: smoothMove(prev[dragging].x, originalPos.x + dx),\n          y: smoothMove(prev[dragging].y, originalPos.y + dy)\n        }\n      }));\n    } else if (isPanning) {\n      // We're panning the view\n      const dx = e.clientX - lastPosition.x;\n      const dy = e.clientY - lastPosition.y;\n\n      // Adjust based on current scale\n      const panSpeed = 1 / scale;\n      setViewBox(prev => ({\n        ...prev,\n        x: prev.x - dx * panSpeed,\n        y: prev.y - dy * panSpeed\n      }));\n      setLastPosition({\n        x: e.clientX,\n        y: e.clientY\n      });\n    }\n  };\n\n  // Handle mouse up for ending panning and dragging\n  const handleSvgMouseUp = () => {\n    if (dragging) {\n      // Update the original position for next drag operation\n      const svg = svgRef.current;\n      if (svg) {\n        const ctm = svg.getScreenCTM();\n        if (ctm) {\n          // Store the new position as the base for next drag\n          const originalPos = positions[dragging];\n          setPositions(prev => ({\n            ...prev,\n            [dragging]: {\n              x: originalPos.x,\n              y: originalPos.y\n            }\n          }));\n        }\n      }\n    }\n    setIsPanning(false);\n    setDragging(null);\n  };\n\n  // Handle mouse leave for ending panning and dragging\n  const handleSvgMouseLeave = () => {\n    setIsPanning(false);\n    setDragging(null);\n  };\n\n  // Handle machine drag start\n  const handleMachineDragStart = (id, e) => {\n    e.stopPropagation(); // Prevent SVG from starting a pan operation\n\n    const svg = svgRef.current;\n    if (!svg) return;\n    const point = svg.createSVGPoint();\n    point.x = e.clientX;\n    point.y = e.clientY;\n\n    // Get current transformation matrix\n    const ctm = svg.getScreenCTM();\n    if (!ctm) return;\n\n    // Transform client coordinates to SVG coordinates\n    const svgPoint = point.matrixTransform(ctm.inverse());\n\n    // Store the start position for calculating movement delta\n    setDragStart({\n      x: svgPoint.x,\n      y: svgPoint.y\n    });\n\n    // Store a copy of the current positions to use as reference\n    const originalPos = positions[id];\n    setPositions(prev => ({\n      ...prev,\n      [id]: {\n        x: originalPos.x,\n        y: originalPos.y\n      }\n    }));\n    setDragging(id);\n  };\n\n  // Handle zoom with mouse wheel\n  const handleWheel = e => {\n    e.preventDefault();\n    const svg = svgRef.current;\n    if (!svg) return;\n    const point = svg.createSVGPoint();\n    point.x = e.clientX;\n    point.y = e.clientY;\n\n    // Get current transformation matrix\n    const ctm = svg.getScreenCTM();\n    if (!ctm) return;\n\n    // Transform client coordinates to SVG coordinates\n    const svgPoint = point.matrixTransform(ctm.inverse());\n\n    // Calculate new scale\n    const zoomFactor = e.deltaY > 0 ? 1.1 : 0.9;\n    const newScale = Math.max(0.5, Math.min(5, scale * zoomFactor));\n\n    // Calculate new viewBox dimensions\n    const newWidth = viewBox.width * (newScale / scale);\n    const newHeight = viewBox.height * (newScale / scale);\n\n    // Calculate new viewBox position to zoom toward/away from mouse\n    const mouseXRatio = (svgPoint.x - viewBox.x) / viewBox.width;\n    const mouseYRatio = (svgPoint.y - viewBox.y) / viewBox.height;\n    const newX = svgPoint.x - mouseXRatio * newWidth;\n    const newY = svgPoint.y - mouseYRatio * newHeight;\n    setViewBox({\n      x: newX,\n      y: newY,\n      width: newWidth,\n      height: newHeight\n    });\n    setScale(newScale);\n  };\n\n  // Handle zoom in button\n  const handleZoomIn = () => {\n    setScale(prev => {\n      const newScale = Math.min(5, prev * 1.2);\n\n      // Adjust viewBox to maintain center\n      setViewBox(prev => {\n        const centerX = prev.x + prev.width / 2;\n        const centerY = prev.y + prev.height / 2;\n        const newWidth = prev.width * (scale / newScale);\n        const newHeight = prev.height * (scale / newScale);\n        return {\n          x: centerX - newWidth / 2,\n          y: centerY - newHeight / 2,\n          width: newWidth,\n          height: newHeight\n        };\n      });\n      return newScale;\n    });\n  };\n\n  // Handle zoom out button\n  const handleZoomOut = () => {\n    setScale(prev => {\n      const newScale = Math.max(0.5, prev / 1.2);\n\n      // Adjust viewBox to maintain center\n      setViewBox(prev => {\n        const centerX = prev.x + prev.width / 2;\n        const centerY = prev.y + prev.height / 2;\n        const newWidth = prev.width * (scale / newScale);\n        const newHeight = prev.height * (scale / newScale);\n        return {\n          x: centerX - newWidth / 2,\n          y: centerY - newHeight / 2,\n          width: newWidth,\n          height: newHeight\n        };\n      });\n      return newScale;\n    });\n  };\n\n  // Reset machine positions to initial circle layout in one go\n  const handleResetPositions = () => {\n    // Calculate fresh circle positions to ensure consistency\n    const freshCirclePositions = calculateCirclePositions();\n    setPositions(freshCirclePositions);\n    setCirclePositions(freshCirclePositions);\n\n    // Also update in localStorage via the callback\n    if (onPositionsChange) {\n      onPositionsChange(freshCirclePositions);\n    }\n  };\n\n  // Compute viewBox string\n  const viewBoxString = `${viewBox.x} ${viewBox.y} ${viewBox.width} ${viewBox.height}`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `visualizer ${isReduced ? 'reduced' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      width: \"100%\",\n      height: \"100%\",\n      viewBox: viewBoxString,\n      onMouseDown: handleSvgMouseDown,\n      onMouseMove: handleSvgMouseMove,\n      onMouseUp: handleSvgMouseUp,\n      onMouseLeave: handleSvgMouseLeave,\n      onWheel: handleWheel,\n      children: [links.map((link, index) => {\n        // Only render links if we have positions for both machines\n        if (!positions[link.source] || !positions[link.target]) return null;\n        return /*#__PURE__*/_jsxDEV(MachineLink, {\n          sourceX: positions[link.source].x,\n          sourceY: positions[link.source].y,\n          targetX: positions[link.target].x,\n          targetY: positions[link.target].y,\n          type: link.type\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 25\n        }, this);\n      }), machines.map(machine => {\n        // Only render machines if we have positions for them\n        if (!positions[machine.id]) return null;\n        return /*#__PURE__*/_jsxDEV(\"g\", {\n          onMouseDown: e => handleMachineDragStart(machine.id, e),\n          children: /*#__PURE__*/_jsxDEV(Machine, {\n            machine: machine,\n            x: positions[machine.id].x,\n            y: positions[machine.id].y,\n            onClick: () => onMachineClick(machine)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 29\n          }, this)\n        }, machine.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 25\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"visualizer-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleZoomIn,\n        className: \"zoom-button\",\n        title: \"Zoom In\",\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleZoomOut,\n        className: \"zoom-button\",\n        title: \"Zoom Out\",\n        children: \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleResetPositions,\n        className: \"zoom-button reset-button\",\n        title: \"Reset Positions\",\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 9\n  }, this);\n};\n_s(Visualizer, \"VJaRaCEbdxiycIGxopcR2QdcBBc=\");\n_c = Visualizer;\nexport default Visualizer;\nvar _c;\n$RefreshReg$(_c, \"Visualizer\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Machine","MachineLink","jsxDEV","_jsxDEV","Visualizer","machines","links","onMachineClick","isReduced","initialPositions","onPositionsChange","_s","svgRef","positions","setPositions","circlePositions","setCirclePositions","dragging","setDragging","dragStart","setDragStart","x","y","viewBox","setViewBox","width","height","isPanning","setIsPanning","lastPosition","setLastPosition","scale","setScale","calculateCirclePositions","centerX","centerY","radius","newCirclePositions","forEach","machine","index","angle","Math","PI","length","id","cos","sin","Object","keys","newPositions","handleSvgMouseDown","e","button","clientX","clientY","handleSvgMouseMove","svg","current","point","createSVGPoint","ctm","getScreenCTM","svgPoint","matrixTransform","inverse","dx","dy","originalPos","smoothMove","target","factor","prev","panSpeed","handleSvgMouseUp","handleSvgMouseLeave","handleMachineDragStart","stopPropagation","handleWheel","preventDefault","zoomFactor","deltaY","newScale","max","min","newWidth","newHeight","mouseXRatio","mouseYRatio","newX","newY","handleZoomIn","handleZoomOut","handleResetPositions","freshCirclePositions","viewBoxString","className","children","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onWheel","map","link","source","sourceX","sourceY","targetX","targetY","type","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","_c","$RefreshReg$"],"sources":["/home/dangremontlucas/Epitech/Year3/Semestre5/Wormsec/Wormsec/src/components/Visualizer.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport Machine from './Machine';\nimport MachineLink from './MachineLink';\nimport { Machine as MachineType, Link } from '../types';\nimport './Visualizer.css';\n\ninterface VisualizerProps {\n    machines: MachineType[];\n    links: Link[];\n    onMachineClick: (machine: MachineType) => void;\n    isReduced: boolean;\n    initialPositions?: Record<string, Position>;\n    onPositionsChange?: (positions: Record<string, Position>) => void;\n}\n\ninterface Position {\n    x: number;\n    y: number;\n}\n\nconst Visualizer: React.FC<VisualizerProps> = ({ \n    machines, \n    links, \n    onMachineClick,\n    isReduced,\n    initialPositions = {},\n    onPositionsChange\n}) => {\n    const svgRef = useRef<SVGSVGElement>(null);\n    const [positions, setPositions] = useState<Record<string, Position>>({});\n    const [circlePositions, setCirclePositions] = useState<Record<string, Position>>({});\n    const [dragging, setDragging] = useState<string | null>(null);\n    const [dragStart, setDragStart] = useState<Position>({ x: 0, y: 0 });\n    const [viewBox, setViewBox] = useState({ x: 0, y: 0, width: 550, height: 350 });\n    const [isPanning, setIsPanning] = useState(false);\n    const [lastPosition, setLastPosition] = useState({ x: 0, y: 0 });\n    const [scale, setScale] = useState(1);\n    \n    const calculateCirclePositions = useCallback(() => {\n        const centerX = 275;\n        const centerY = 175;\n        const radius = 100;\n        \n        const newCirclePositions: Record<string, Position> = {};\n        machines.forEach((machine, index) => {\n            const angle = (index * 2 * Math.PI) / machines.length;\n            newCirclePositions[machine.id] = {\n                x: centerX + radius * Math.cos(angle),\n                y: centerY + radius * Math.sin(angle)\n            };\n        });\n        \n        return newCirclePositions;\n    }, [machines]);\n    \n    useEffect(() => {\n        const newCirclePositions = calculateCirclePositions();\n        setCirclePositions(newCirclePositions);\n    }, [calculateCirclePositions]);\n    \n    // Initialize machine positions from props or in a circle layout\n    useEffect(() => {\n        const newCirclePositions = calculateCirclePositions();\n        \n        if (Object.keys(initialPositions).length > 0) {\n            // Use provided positions if available\n            const newPositions: Record<string, Position> = {};\n            \n            machines.forEach(machine => {\n                if (initialPositions[machine.id]) {\n                    newPositions[machine.id] = initialPositions[machine.id];\n                } else {\n                    // Fallback to circle position for new machines\n                    newPositions[machine.id] = newCirclePositions[machine.id];\n                }\n            });\n            \n            setPositions(newPositions);\n            setCirclePositions(newCirclePositions);\n        } else {\n            // Use circle layout if no positions provided\n            setPositions(newCirclePositions);\n            setCirclePositions(newCirclePositions);\n        }\n    }, [machines, initialPositions, calculateCirclePositions]);\n    \n    // Notify parent component when positions change\n    useEffect(() => {\n        if (onPositionsChange && Object.keys(positions).length > 0) {\n            onPositionsChange(positions);\n        }\n    }, [positions, onPositionsChange]);\n    \n    // Handle mouse down on SVG for panning\n    const handleSvgMouseDown = (e: React.MouseEvent) => {\n        if (e.button === 0 && !dragging) { // Left click and not dragging a machine\n            setIsPanning(true);\n            setLastPosition({ x: e.clientX, y: e.clientY });\n        }\n    };\n    \n    // Handle mouse move for panning and dragging\n    const handleSvgMouseMove = (e: React.MouseEvent) => {\n        if (dragging) {\n            // We're dragging a machine - use a fixed reference point to avoid trembling\n            const svg = svgRef.current;\n            if (!svg) return;\n            \n            const point = svg.createSVGPoint();\n            point.x = e.clientX;\n            point.y = e.clientY;\n            \n            // Get current transformation matrix\n            const ctm = svg.getScreenCTM();\n            if (!ctm) return;\n            \n            // Transform client coordinates to SVG coordinates\n            const svgPoint = point.matrixTransform(ctm.inverse());\n            \n            // Calculate movement delta from the start position\n            const dx = svgPoint.x - dragStart.x;\n            const dy = svgPoint.y - dragStart.y;\n            \n            // Update machine position based on its original position plus the delta\n            const originalPos = positions[dragging];\n\n            const smoothMove = (current: number, target: number, factor = 0.1) => \n                current + (target - current) * factor;\n            \n            \n            setPositions(prev => ({\n                ...prev,\n                [dragging]: {\n                    x: smoothMove(prev[dragging].x, originalPos.x + dx),\n                    y: smoothMove(prev[dragging].y, originalPos.y + dy)\n                }\n            }));            \n        } else if (isPanning) {\n            // We're panning the view\n            const dx = e.clientX - lastPosition.x;\n            const dy = e.clientY - lastPosition.y;\n            \n            // Adjust based on current scale\n            const panSpeed = 1 / scale;\n            \n            setViewBox(prev => ({\n                ...prev,\n                x: prev.x - dx * panSpeed,\n                y: prev.y - dy * panSpeed\n            }));\n            \n            setLastPosition({ x: e.clientX, y: e.clientY });\n        }\n    };\n    \n    // Handle mouse up for ending panning and dragging\n    const handleSvgMouseUp = () => {\n        if (dragging) {\n            // Update the original position for next drag operation\n            const svg = svgRef.current;\n            if (svg) {\n                const ctm = svg.getScreenCTM();\n                if (ctm) {\n                    // Store the new position as the base for next drag\n                    const originalPos = positions[dragging];\n                    \n                    setPositions(prev => ({\n                        ...prev,\n                        [dragging]: {\n                            x: originalPos.x,\n                            y: originalPos.y\n                        }\n                    }));\n                }\n            }\n        }\n        \n        setIsPanning(false);\n        setDragging(null);\n    };\n    \n    // Handle mouse leave for ending panning and dragging\n    const handleSvgMouseLeave = () => {\n        setIsPanning(false);\n        setDragging(null);\n    };\n    \n    // Handle machine drag start\n    const handleMachineDragStart = (id: string, e: React.MouseEvent) => {\n        e.stopPropagation(); // Prevent SVG from starting a pan operation\n        \n        const svg = svgRef.current;\n        if (!svg) return;\n        \n        const point = svg.createSVGPoint();\n        point.x = e.clientX;\n        point.y = e.clientY;\n        \n        // Get current transformation matrix\n        const ctm = svg.getScreenCTM();\n        if (!ctm) return;\n        \n        // Transform client coordinates to SVG coordinates\n        const svgPoint = point.matrixTransform(ctm.inverse());\n        \n        // Store the start position for calculating movement delta\n        setDragStart({\n            x: svgPoint.x,\n            y: svgPoint.y\n        });\n        \n        // Store a copy of the current positions to use as reference\n        const originalPos = positions[id];\n        setPositions(prev => ({\n            ...prev,\n            [id]: {\n                x: originalPos.x,\n                y: originalPos.y\n            }\n        }));\n        \n        setDragging(id);\n    };\n    \n    // Handle zoom with mouse wheel\n    const handleWheel = (e: React.WheelEvent) => {\n        e.preventDefault();\n        \n        const svg = svgRef.current;\n        if (!svg) return;\n        \n        const point = svg.createSVGPoint();\n        point.x = e.clientX;\n        point.y = e.clientY;\n        \n        // Get current transformation matrix\n        const ctm = svg.getScreenCTM();\n        if (!ctm) return;\n        \n        // Transform client coordinates to SVG coordinates\n        const svgPoint = point.matrixTransform(ctm.inverse());\n        \n        // Calculate new scale\n        const zoomFactor = e.deltaY > 0 ? 1.1 : 0.9;\n        const newScale = Math.max(0.5, Math.min(5, scale * zoomFactor));\n        \n        // Calculate new viewBox dimensions\n        const newWidth = viewBox.width * (newScale / scale);\n        const newHeight = viewBox.height * (newScale / scale);\n        \n        // Calculate new viewBox position to zoom toward/away from mouse\n        const mouseXRatio = (svgPoint.x - viewBox.x) / viewBox.width;\n        const mouseYRatio = (svgPoint.y - viewBox.y) / viewBox.height;\n        \n        const newX = svgPoint.x - mouseXRatio * newWidth;\n        const newY = svgPoint.y - mouseYRatio * newHeight;\n        \n        setViewBox({\n            x: newX,\n            y: newY,\n            width: newWidth,\n            height: newHeight\n        });\n        \n        setScale(newScale);\n    };\n    \n    // Handle zoom in button\n    const handleZoomIn = () => {\n        setScale(prev => {\n            const newScale = Math.min(5, prev * 1.2);\n            \n            // Adjust viewBox to maintain center\n            setViewBox(prev => {\n                const centerX = prev.x + prev.width / 2;\n                const centerY = prev.y + prev.height / 2;\n                \n                const newWidth = prev.width * (scale / newScale);\n                const newHeight = prev.height * (scale / newScale);\n                \n                return {\n                    x: centerX - newWidth / 2,\n                    y: centerY - newHeight / 2,\n                    width: newWidth,\n                    height: newHeight\n                };\n            });\n            \n            return newScale;\n        });\n    };\n    \n    // Handle zoom out button\n    const handleZoomOut = () => {\n        setScale(prev => {\n            const newScale = Math.max(0.5, prev / 1.2);\n            \n            // Adjust viewBox to maintain center\n            setViewBox(prev => {\n                const centerX = prev.x + prev.width / 2;\n                const centerY = prev.y + prev.height / 2;\n                \n                const newWidth = prev.width * (scale / newScale);\n                const newHeight = prev.height * (scale / newScale);\n                \n                return {\n                    x: centerX - newWidth / 2,\n                    y: centerY - newHeight / 2,\n                    width: newWidth,\n                    height: newHeight\n                };\n            });\n            \n            return newScale;\n        });\n    };\n    \n    // Reset machine positions to initial circle layout in one go\n    const handleResetPositions = () => {\n        // Calculate fresh circle positions to ensure consistency\n        const freshCirclePositions = calculateCirclePositions();\n        setPositions(freshCirclePositions);\n        setCirclePositions(freshCirclePositions);\n        \n        // Also update in localStorage via the callback\n        if (onPositionsChange) {\n            onPositionsChange(freshCirclePositions);\n        }\n    };\n    \n    // Compute viewBox string\n    const viewBoxString = `${viewBox.x} ${viewBox.y} ${viewBox.width} ${viewBox.height}`;\n    \n    return (\n        <div className={`visualizer ${isReduced ? 'reduced' : ''}`}>\n            <svg \n                ref={svgRef}\n                width=\"100%\" \n                height=\"100%\" \n                viewBox={viewBoxString}\n                onMouseDown={handleSvgMouseDown}\n                onMouseMove={handleSvgMouseMove}\n                onMouseUp={handleSvgMouseUp}\n                onMouseLeave={handleSvgMouseLeave}\n                onWheel={handleWheel}\n            >\n                {links.map((link, index) => {\n                    // Only render links if we have positions for both machines\n                    if (!positions[link.source] || !positions[link.target]) return null;\n                    \n                    return (\n                        <MachineLink\n                            key={index}\n                            sourceX={positions[link.source].x}\n                            sourceY={positions[link.source].y}\n                            targetX={positions[link.target].x}\n                            targetY={positions[link.target].y}\n                            type={link.type}\n                        />\n                    );\n                })}\n                \n                {machines.map(machine => {\n                    // Only render machines if we have positions for them\n                    if (!positions[machine.id]) return null;\n                    \n                    return (\n                        <g \n                            key={machine.id}\n                            onMouseDown={(e) => handleMachineDragStart(machine.id, e)}\n                        >\n                            <Machine\n                                machine={machine}\n                                x={positions[machine.id].x}\n                                y={positions[machine.id].y}\n                                onClick={() => onMachineClick(machine)}\n                            />\n                        </g>\n                    );\n                })}\n            </svg>\n            \n            {/* Zoom controls */}\n            <div className=\"visualizer-controls\">\n                <button \n                    onClick={handleZoomIn}\n                    className=\"zoom-button\"\n                    title=\"Zoom In\"\n                >\n                    +\n                </button>\n                <button \n                    onClick={handleZoomOut}\n                    className=\"zoom-button\"\n                    title=\"Zoom Out\"\n                >\n                    -\n                </button>\n                <button \n                    onClick={handleResetPositions}\n                    className=\"zoom-button reset-button\"\n                    title=\"Reset Positions\"\n                >\n                    Reset\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default Visualizer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}